<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>뉴스 검색</title>
    <style>
        .news-item {
            border-bottom: 1px solid #ddd;
            padding: 10px 0;
        }
        .news-title {
            font-weight: bold;
        }
        .news-description {
            color: #555;
        }
    </style>
</head>
<body>
    <h1>뉴스 검색</h1>
    <input type="text" id="searchQuery" placeholder="검색어를 입력하세요">
    <button id="searchButton">검색</button>
    <div id="newsContainer"></div>

    <script>
        const naverClientID = 'dloPTebOu4cLrqZwu8eQ';
        const naverClientSecret = 'XW9a6SWIgJ';

        async function getNews(query, display=10, sort = 'date') {
            const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
            const targetUrl = `https://openapi.naver.com/v1/search/news.json?query=${query}&display=${display}&sort=${sort}`;
            const url = proxyUrl + targetUrl;

            const options = {
                method: 'GET',
                headers: {
                    'X-Naver-Client-Id': naverClientID,
                    'X-Naver-Client-Secret': naverClientSecret
                }
            };
            try {
                const res = await fetch(url, options);
                if (!res.ok) { throw new Error('네트워크 연결이 좋지 않습니다.') }
                const data = await res.json();
                return data.items;
            } catch (error) {
                console.error('fetch 에러 : ', error);
                return [];
            }
        }

        function displayNews(newsItems, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = ''; // 기존 내용을 초기화
            newsItems.forEach(item => {
                const newsElement = document.createElement('div');
                newsElement.className = 'news-item';
                newsElement.innerHTML = `
                    <a href="${item.link}" target="_blank" class="news-link">
                        <div class="news-title">${item.title}</div>
                    </a>
                    <div class="news-description">${item.description}</div>
                `;
                container.appendChild(newsElement);
            });
        }

        document.getElementById('searchButton').addEventListener('click', async () => {
            const query = document.getElementById('searchQuery').value;
            if (query) {
                const newsItems = await getNews(query);
                displayNews(newsItems, 'newsContainer');
            } else {
                alert('검색어를 입력하세요.');
            }
        });
    </script>
</body>
</html>`